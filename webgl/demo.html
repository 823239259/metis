<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo</title>
    <style>
        *{margin: 0;padding: 0;}
        .canvas{position: fixed;width: 100%;height: 100%;}
    </style>
</head>
<body>
<div class="canvas"></div>
<script src="http://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js"></script>
<script src="../../common/libs/three.js"></script>
<script src="../../common/libs/stats.min.js"></script>
<script>
    var sketch = {

        /**
         * x轴: 紫
         * y轴: 蓝
         * z轴: 绿
         */

        scene: null,
        camera: null,
        renderer: null,
        stats: null,

        do: function () {
            var _this = this;
            _this.initThree();
            _this.initLight();
            _this.coordinate();
            _this.renderScene();
        },
        initThree: function () {
            var _this = this;
            var $canvas = $('.canvas').get(0);
            var width = $canvas.clientWidth;
            var height = $canvas.clientHeight;

            /** 场景 **/
            var scene = new THREE.Scene();

            /** 相机 **/
            var camera = new THREE.PerspectiveCamera(45, width / height, 1, 1000);
            camera.position.set(0, 0, 50);
            camera.up.set(0, 1, 0);
            camera.lookAt({x: 0, y: 0, z: 0});

            /** 渲染器 **/
            var renderer = new THREE.WebGLRenderer({
                antialias: true // 反锯齿
            });
            renderer.setSize(width, height);
            renderer.setClearColor(0x000000);
            // 阴影
            renderer.shadowMapEnabled = true;
            renderer.shadowMapSoft = true;

            /** 监测器 **/
            var stats = new Stats();

            $canvas.appendChild(renderer.domElement);
            document.body.appendChild(stats.domElement);

            _this.scene = scene;
            _this.camera = camera;
            _this.renderer = renderer;
            _this.stats = stats;
        },
        initLight: function () {
            var _this = this;
            var spot = new THREE.SpotLight(0xFF00FF, 1, 100, Math.PI / 6);

            /** 聚光灯 **/
            spot.position.set(0, 0, 50);
            spot.target.position.set(0, 0, 0);
            // 阴影
            spot.castShadow = true;
            spot.shadowCameraNear = 1;
            spot.shadowCameraFar = 100;
            spot.shadowCameraFov = 30;
            spot.shadowCameraVisible = true;

            _this.scene.add(spot);
        },
        coordinate: function () {
            var _this = this;
            var cooX = new THREE.Vector3(50, 0, 0);
            var cooY = new THREE.Vector3(0, 50, 0);
            var cooZ = new THREE.Vector3(0, 0, 50);

            // x 轴
            _this.drawAxis(cooX, 0x4B0082);
            // y轴
            _this.drawAxis(cooY, 0x0000FF);
            // z轴
            _this.drawAxis(cooZ, 0x00FA9A);
        },
        drawAxis: function (point, color) {
            var _this = this;
            var origin = new THREE.Vector3(0, 0, 0);
            var geometry = new THREE.Geometry();
            var material = new THREE.LineBasicMaterial({
                color: color
            });
            geometry.vertices.push(origin, point);
            var line = new THREE.Line(geometry, material, THREE.LinePieces);

            _this.scene.add(line);
        },
        renderScene: function () {
            var _this = this;

            _this.stats.begin();
            _this.renderer.render(_this.scene, _this.camera);
            _this.stats.end();
        }
    };

    sketch.do();
</script>
</body>
</html>